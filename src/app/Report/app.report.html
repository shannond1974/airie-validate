<section id="portfolio">
  <div class="row" style="padding-bottom:20px">
    <div class="row justify-content-center" style="padding-top:-50px" [hidden]="uiStage>0">
      <div class="col-2"></div>
      <div class="col-2"><button class="btn btn-info"  (click)="moveStage(true)">{{proceedButtonText}}</button></div>
      <div class="col-6">
        
          <button [hidden]="!merged"  class="btn btn-info"  (click)="publishReport()">Publish Report</button>&nbsp;
        
        
          <button [hidden]="!published" class="btn btn-info"  (click)="emailLink()">Email Customer</button>
          
        
        
        <!--<textarea>{{completeReport}}</textarea>-->
      </div>
      <div class="col-2">{{emailSent}}</div>
    </div>
  </div>
  <div class="card" id="myDiv">
    
    <div class="container" [hidden]="uiStage>0">
        <div *ngFor="let reportPart of reportParts; let i=index">
            <div [hidden]="reportPartEdits[i]" [innerHtml]="reportPart | safeHtml"></div>
            <div *ngIf="!published">
            <div class="row" [hidden]="!reportPartEdits[i]">
              <div class="col-4">
              <textarea style="min-width: 100%;min-height:200px;font-size:small" [(ngModel)]="activeReportPart" id="edit{{i}}"></textarea></div>
              <div class="col-8" [innerHtml]="reportParts[i] | safeHtml"></div>
            </div>
            <div class="row mx-auto d-block" style="padding-top:10px;padding-bottom:10px" *ngIf="!reportPartEdits[i]">
              <button class="btn btn-info mx-auto d-block" style="max-width:100px" (click)="editContent(i)">Edit</button></div>
            <div class="row"  style="padding-top:10px;padding-bottom:10px"  *ngIf="reportPartEdits[i]">
              <div class="col-1"><button class="btn btn-danger" style="max-height:50px;max-width:100px" (click)="cancelContent(i)">Undo</button></div>
              <div class="col-1"><button class="btn btn-info" style="max-height:50px;max-width:100px" (click)="saveContent(i,false)"  >Test</button></div>
              <div class="col-1"><button class="btn btn-primary" style="max-height:50px;max-width:100px" (click)="saveContent(i,true)"  >Save</button></div>
            </div>
          </div>
        </div> 
    </div>

  </div> 
</section>    